using Cosmos.Core.Memory;
using Cosmos.HAL;
using Cosmos.System;
using Cosmos.System.Graphics;
using Cosmos.System.Network.Config;
using Cosmos.System.Network.IPv4;
using Cosmos.System.Network.IPv4.UDP.DHCP;
using Cosmos.System.Network.IPv4.UDP.DNS;
using CrystalOS_Alpha.Graphics.Widgets;
using CrystalOSAlpha;
using CrystalOSAlpha.Applications.Minecraft;
using CrystalOSAlpha.Applications.Video_Player;
using CrystalOSAlpha.Graphics;
using CrystalOSAlpha.Graphics.Engine;
using CrystalOSAlpha.Graphics.TaskBar;
using CrystalOSAlpha.Graphics.Widgets;
using IL2CPU.API.Attribs;
using System;
using System.Collections.Generic;
using System.ComponentModel.Design;
using System.Drawing;
using System.IO;
using System.Net;
using System.Text;
using EndPoint = Cosmos.System.Network.IPv4.EndPoint;
using Sys = Cosmos.System;

namespace CrystalOS_Alpha
{
    public class Kernel : Sys.Kernel
    {
        public VBECanvas vbe = new VBECanvas(new Mode(1920, 1080, ColorDepth.ColorDepth32));
        [ManifestResourceStream(ResourceName = "CrystalOSAlpha.Graphics.Engine.Cursor.bmp")] public static byte[] Cursor;
        public static Bitmap C = new Bitmap(Cursor);
        protected override void BeforeRun()
        {
            
            using (var xClient = new DHCPClient())
            {
                /** Send a DHCP Discover packet **/
                //This will automatically set the IP config after DHCP response
                xClient.SendDiscoverPacket();
            }
            
            //NetworkDevice nic = NetworkDevice.GetDeviceByName("eth0"); //get network device by name
            //IPConfig.Enable(nic, new Address(192, 168, 1, 69), new Address(255, 255, 255, 0), new Address(192, 168, 1, 254)); //enable IPv4 configuration

            FPS_Counter f = new FPS_Counter();
            f.X = 200;
            f.Y = 200;
            f.Z = 0;
            Rendering.widgets.Add(f);

            ImageViewer i = new ImageViewer();
            i.X = 600;
            i.Y = 200;
            i.Z = 1;
            Rendering.widgets.Add(i);

            MouseManager.ScreenWidth = 1920;
            MouseManager.ScreenHeight = 1080;

            string CustomCharset = "!\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~";
MemoryStream ArialCustomCharset16 = new MemoryStream(Convert.FromBase64String("AAAAAAAAAAAAAAAAIAAgACAAIAAgACAAAAAgAAAAAAAAAAAAAAAAAAAAAAAoACgAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoACgA+ABQAFAA+ACgAKAAAAAAAAAAAAAAAAAAAAAAAHAAqACgAHAAKAAoAKgAcAAgAAAAAAAAAAAAAAAAAAAAYgCUAJQAaAALABSAFIAjAAAAAAAAAAAAAAAAAAAAAAAwAEgASAAwAFAAjACIAHQAAAAAAAAAAAAAAAAAAAAAAIAAgACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIABAAIAAgACAAIAAgACAAEAAIAAAAAAAAAAAAAAAAACAAEAAIAAgACAAIAAgACAAQACAAAAAAAAAAAAAAAAAAEAA4ABAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAIAD4ACAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAgACAAQABAAEAAQACAAIAAAAAAAAAAAAAAAAAAAAAAAHAAiACIAIgAiACIAIgAcAAAAAAAAAAAAAAAAAAAAAAAIABgAKAAIAAgACAAIAAgAAAAAAAAAAAAAAAAAAAAAABwAIgACAAIABAAIABAAPgAAAAAAAAAAAAAAAAAAAAAAHAAiAAIADAACAAIAIgAcAAAAAAAAAAAAAAAAAAAAAAAEAAwAFAAUACQAPgAEAAQAAAAAAAAAAAAAAAAAAAAAAB4AEAAgADwAAgACACIAHAAAAAAAAAAAAAAAAAAAAAAAHAAiACAAPAAiACIAIgAcAAAAAAAAAAAAAAAAAAAAAAA+AAQABAAIAAgAEAAQABAAAAAAAAAAAAAAAAAAAAAAABwAIgAiABwAIgAiACIAHAAAAAAAAAAAAAAAAAAAAAAAHAAiACIAIgAeAAIAIgAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAIAAgACAAAAAAAAAAAAAAAAAAAAAAAAIAHAAgABwAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA+AAAAPgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgABwAAgAcACAAAAAAAAAAAAAAAAAAAAAAAAAAHAAiAAIABAAIAAgAAAAIAAAAAAAAAAAAAAAAAAAAAAAHwBggE1Ak0CiQKJApoCbAEBAP4AAAAAAAAAAAAAAAAAQACgAKAAoAEQAfACCAIIAAAAAAAAAAAAAAAAAAAAAAPgAhACEAPwAhACEAIQA+AAAAAAAAAAAAAAAAAAAAAAAOABEAIAAgACAAIAARAA4AAAAAAAAAAAAAAAAAAAAAADwAIgAhACEAIQAhACIAPAAAAAAAAAAAAAAAAAAAAAAAPgAgACAAPgAgACAAIAA+AAAAAAAAAAAAAAAAAAAAAAA+ACAAIAA8ACAAIAAgACAAAAAAAAAAAAAAAAAAAAAAAA4AEQAggCAAI4AggBEADgAAAAAAAAAAAAAAAAAAAAAAIQAhACEAPwAhACEAIQAhAAAAAAAAAAAAAAAAAAAAAAAgACAAIAAgACAAIAAgACAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAkACQAGAAAAAAAAAAAAAAAAAAAAAAAIQAiACQALAA0ACIAIgAhAAAAAAAAAAAAAAAAAAAAAAAgACAAIAAgACAAIAAgAD4AAAAAAAAAAAAAAAAAAAAAACCAMYAxgCqAKoAqgCSAJIAAAAAAAAAAAAAAAAAAAAAAIQAxACkAKQAlACUAIwAhAAAAAAAAAAAAAAAAAAAAAAAOABEAIIAggCCAIIARAA4AAAAAAAAAAAAAAAAAAAAAADwAIgAiACIAPAAgACAAIAAAAAAAAAAAAAAAAAAAAAAADgARACCAIIAggCaAEQAOgAAAAAAAAAAAAAAAAAAAAAA+ACEAIQA+ACQAIgAiACEAAAAAAAAAAAAAAAAAAAAAAB4AIQAgABgABgABACEAHgAAAAAAAAAAAAAAAAAAAAAAPgAIAAgACAAIAAgACAAIAAAAAAAAAAAAAAAAAAAAAAAhACEAIQAhACEAIQAhAB4AAAAAAAAAAAAAAAAAAAAAACCAIIARABEACgAKAAQABAAAAAAAAAAAAAAAAAAAAAAAQhBFECUgJSAooCigEEAQQAAAAAAAAAAAAAAAAAAAAAAhABIAEgAMAAwAEgASACEAAAAAAAAAAAAAAAAAAAAAACCAEQARAAoABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAHwACAAQABAAIAAgAEAA/AAAAAAAAAAAAAAAAAAAAAAAwACAAIAAgACAAIAAgACAAIAAwAAAAAAAAAAAAAAAAACAAIAAQABAAEAAQAAgACAAAAAAAAAAAAAAAAAAAAAAAMAAQABAAEAAQABAAEAAQABAAMAAAAAAAAAAAAAAAAAAIABQAFAAiAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8AAAAAAAAAAAAAAAAAIAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAiAB4AIgAmABoAAAAAAAAAAAAAAAAAAAAAACAAIAAsADIAIgAiADIALAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAIgAgACAAIgAcAAAAAAAAAAAAAAAAAAAAAAACAAIAGgAmACIAIgAmABoAAAAAAAAAAAAAAAAAAAAAAAAAAAAcACIAPgAgACIAHAAAAAAAAAAAAAAAAAAAAAAACAAQADgAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAGgAmACIAIgAmABoAAgA8AAAAAAAAAAAAAAAAACAAIAAsADIAIgAiACIAIgAAAAAAAAAAAAAAAAAAAAAAIAAAACAAIAAgACAAIAAgAAAAAAAAAAAAAAAAAAAAAAAgAAAAIAAgACAAIAAgACAAIABAAAAAAAAAAAAAAAAAACAAIAAkACgAMAAoACgAJAAAAAAAAAAAAAAAAAAAAAAAIAAgACAAIAAgACAAIAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAALwA0gCSAJIAkgCSAAAAAAAAAAAAAAAAAAAAAAAAAAAA8ACIAIgAiACIAIgAAAAAAAAAAAAAAAAAAAAAAAAAAABwAIgAiACIAIgAcAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAyACIAIgAyACwAIAAgAAAAAAAAAAAAAAAAAAAAAAAaACYAIgAiACYAGgACAAIAAAAAAAAAAAAAAAAAAAAAACgAMAAgACAAIAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAiABgABAAiABwAAAAAAAAAAAAAAAAAAAAAACAAIABwACAAIAAgACAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAACIAIgAiACIAJgAaAAAAAAAAAAAAAAAAAAAAAAAAAAAAIgAiABQAFAAIAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAiICUgFUAVQAiACIAAAAAAAAAAAAAAAAAAAAAAAAAAACIAFAAIAAgAFAAiAAAAAAAAAAAAAAAAAAAAAAAAAAAAIgAiABQAFAAIAAgACAAQAAAAAAAAAAAAAAAAAAAAAAA+AAQACAAIABAAPgAAAAAAAAAAAAAAAAAAAAAACAAQABAAEAAgABAAEAAQABAACAAAAAAAAAAAAAAAAAAgACAAIAAgACAAIAAgACAAIAAgAAAAAAAAAAAAAAAAABAACAAIAAgABAAIAAgACAAIABAAAAAAAAAAAAAAAAAAAAAAAAAAOgAsAAAAAAAAAAAAAAA="));
            BitFont.RegisterBitFont("ArialCustomCharset16", new BitFontDescriptor(CustomCharset, ArialCustomCharset16, 16));

MemoryStream VerdanaCustomCharset24 = new MemoryStream(Convert.FromBase64String("AAAAAAAAAAAAAAAAAAAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAAAAAAAAAwAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmAABmAABmAABmAABmAABmAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEAABEAACIAACIAA//AACIAAEQAAEQAAEQAB/+AAIgAAIgAAIgAARAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAEAAAEAAAfgAA/wABkQABkAABkAAB8AAAfgAAHwAAEwAAEwABEwAB/gAA/AAAEAAAEAAAEAAAEAAAAAAAAAAAAAAAAAAA4DABkCADGGADGEADGMADGIADGY4BkRkA4zGAAjGABjGABDGADDGACBkAGA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAeAAA/AABjAABjAABjAAA2AAAcYABsYABGYADDYADBwADAwADh4AB/MAA+GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAABgAABgAABgAABgAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAMAAAYAAA4AAAwAAAwAABgAABgAABgAABgAABgAABgAABgAABgAAAwAAAwAAA4AAAYAAAMAAAOAAAAAAAAAAAAAAAAAADgAABgAAAwAAA4AAAYAAAYAAAMAAAMAAAMAAAMAAAMAAAMAAAMAAAMAAAYAAAYAAA4AAAwAABgAADgAAAAAAAAAAAAAAAAAAAEAABEQAB1wAAfAAAEAAAfAAB1wABEQAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAADAAADAAADAAADAAB/+AB/+AADAAADAAADAAADAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAABgAABgAABAAADAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB+AAB+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAABgAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAGAAAGAAAGAAAMAAAMAAAcAAAYAAAYAAA4AAAwAAAwAABgAABgAABgAADAAADAAADAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAfAAA/gABgwABgwADAYADAYADAYADAYADAYADAYADAYABgwABhwAA/gAAfAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGAAAGAAA+AAA+AAAGAAAGAAAGAAAGAAAGAAAGAAAGAAAGAAAGAAA/wAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/AAB/gABBwAAAwAAAwAAAwAABgAABgAADAAAGAAAMAAA4AABwAAB/4AB/4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/AAB/gABBwAAAwAAAwAABgAAPAAAPgAABwAAAwAAAwAAAwABBwAB/gAA/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAADgAAHgAAPgAAdgAAZgAAxgABxgADhgAD/4AD/4AABgAABgAABgAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/4AA/4AAwAAAwAAAwAAAwAAA/gAA/wAAA4AAAYAAAYAAAYABAwAB/wAA/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPgAAfgAAwAABgAABAAADfAAD/wADg4ADAYADAYADAYADgYABwwAA/gAAfAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/4AB/4AAAYAAAwAAAwAABgAADgAADAAAHAAAGAAAOAAAMAAAcAAAYAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfgAB/wADg4ADAYADAYABgwAA9gAA/gABhwADAYADAYADAYADg4AB/wAAfAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfAAA/gABhwADA4ADAYADAYADAYADg4AB/4AAfYAAAQAAAwAABgAA/AAA+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAwAAAwAAAAAAAAAAAAAAAAAAAAAAAwAAAwAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAwAAAwAAAAAAAAAAAAAAAAAAAAAAA4AAAwAAAwAAAgAABgAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAA8AADwAAPAAA8AABwAAA8AAAPAAADwAAA8AAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/+AB/+AAAAAAAAAB/+AB/+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAA8AAAPAAADwAAA8AAAOAAA8AADwAAPAAA8AAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA+AAB/AABDgAABgAABgAABgAADAAAOAAAcAAAYAAAYAAAAAAAAAAAYAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB+AAGDgAcAwAYAYAx+YAzGMBmGMBmGMBmGMBmGMBmGMBjOYAx34A4AAAYAAAOCAAD+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPAAAPAAAPAAAZgAAZgAAZgAAwwAAwwABw4AB/4AB/4ADAMADAMADAMAGAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/gAB/wABg4ABgYABgYABgwAB/gAB/4ABgcABgMABgMABgMABgcAB/4AB/gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPwAA/8AB4MABgEADgAADAAADAAADAAADAAADAAADgAABgEAB4MAA/8AAPwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/AAB/wABg4ABgMABgOABgGABgGABgGABgGABgGABgMABgMABg4AB/wAB/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/4AB/4ABgAABgAABgAABgAAB/4AB/4ABgAABgAABgAABgAABgAAB/4AB/4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/4AB/4ABgAABgAABgAABgAAB/wAB/wABgAABgAABgAABgAABgAABgAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH8AAf/AA4HABwBABgAADAAADAAADA/ADA/ADADADgDABwDAA4DAAf/AAH4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgMABgMABgMABgMABgMABgMAB/8AB/8ABgMABgMABgMABgMABgMABgMABgMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8AAD8AAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAD8AAD8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8AAB8AAAMAAAMAAAMAAAMAAAMAAAMAAAMAAAMAAAMAAAMAAAcAAH4AAHwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgOABgcABg4ABhwABjgABnAABuAAB8AAB2AABjAABhgABhwABg4ABgcABgOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAABgAABgAABgAABgAABgAABgAABgAABgAABgAABgAABgAABgAAB/wAB/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwHABwHAB4PABoLABsbABsTABmzABmzABjjABjjABhDABgDABgDABgDABgDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwMAB4MAB4MABsMABsMABmMABmMABjMABjMABhsABhsABg8ABg8ABgcABgcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPwAA/8AB4eABgGADgHADADADADADADADADADADADgHABgGAB4eAA/8AAPwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/AAB/gABhwABgwABgwABgwABhwAB/gAB+AABgAABgAABgAABgAABgAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPwAA/8AB4eABgGADgHADADADADADADADADADADADgHABgGAB4eAA/8AAPwAAAwAAA4AAAfAAAPAAAAAAAAAAAAAAAAAAAAAB/gAB/wABg4ABgYABgYABgYABgwAB/gAB/AABjAABhgABgwABgYABgcABgOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfwAB/4ADgIADAAADAAADgAAB8AAA/wAAB4AAAMAAAMACAMADgYAD/4AA/gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH/4AH/4AAMAAAMAAAMAAAMAAAMAAAMAAAMAAAMAAAMAAAMAAAMAAAMAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgMABgMABgMABgMABgMABgMABgMABgMABgMABgMABgMABwcAAwYAA/4AAPgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGAGADAMADAMADAMABgYABgYABw4AAwwAAwwAAZgAAZgAAZgAAPAAAPAAAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAwMDAwMBh4YBh4YBh4YBhIYAzMwAzMwAzMwAyEwAaGgAeHgAeHgAcDgAMDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgcABgYAAwwAAwwAAZgAAPAAAPAAAGAAAPAAAPAAAZgAAwwAAwwABgYADgcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHA4ADAwADhwABhgAAzAAAzAAAeAAAeAAAMAAAMAAAMAAAMAAAMAAAMAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/8AD/8AAAcAAA4AABwAADgAADAAAGAAAMAAAcAAA4AABwAADgAAD/8AD/8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8AABgAABgAABgAABgAABgAABgAABgAABgAABgAABgAABgAABgAABgAABgAABgAABgAABgAABgAAB8AAAAAAAAAAAAAAAAAADAAABgAABgAABgAAAwAAAwAAA4AAAYAAAYAAAcAAAMAAAMAAAGAAAGAAAGAAADAAADAAADAAABgAAAAAAAAAAAAAAAAAAAAAB8AAAMAAAMAAAMAAAMAAAMAAAMAAAMAAAMAAAMAAAMAAAMAAAMAAAMAAAMAAAMAAAMAAAMAAAMAAB8AAAAAAAAAAAAAAAAAAAAAAABAAADgAAGwAAMYAAMYAAYMAAwGABgDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH/8AAAAAAAAAAAAAAAAAA4AAAYAAAIAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB+AAB/AAADgAABgAAfgAB/gADhgADBgADDgAD/gAA9gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAABgAABgAABgAABgAABvAAB/gABxwABgwABgwABgwABgwABgwABhgAB/gABvAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAeAAB/AABhAADAAADAAADAAADAAADAAABhAAB/AAAeAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAABgAABgAABgAABgAA/gAB/gABhgADBgADBgADBgADBgADBgADjgAB/gAA9gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfAAB/gABhwADAwAD/wAD/wADAAADAAABwQAB/wAAfgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAeAAA+AABwAABgAABgAAD8AAD8AABgAABgAABgAABgAABgAABgAABgAABgAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/gAB/gABhgADBgADBgADBgADBgADBgADjgAB/gAA9gAABgAADgAB/AAB+AAAAAAAAAAAAAAAAAABgAABgAABgAABgAABgAABvAAB/gABxwABgwABgwABgwABgwABgwABgwABgwABgwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAABgAAAAAAAAAABgAABgAABgAABgAABgAABgAABgAABgAABgAABgAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAwAAAAAAAAAADwAADwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAAAwAABwAAPgAAPAAAAAAAAAAAAAAAAAAABgAABgAABgAABgAABgAABgwABhgABjAABmAABsAAB8AAB+AABnAABjgABhwABg4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAABgAABgAABgAABgAABgAABgAABgAABgAABgAABgAABgAABgAABgAABgAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABvHgB/vwBx44BgwYBgwYBgwYBgwYBgwYBgwYBgwYBgwYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABvAAB/gABxwABgwABgwABgwABgwABgwABgwABgwABgwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAeAAB/gABhgADAwADAwADAwADAwADAwABhgAB/gAAeAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABvAAB/gABxwABgwABgwABgwABgwABgwABhgAB/gAB/AABgAABgAABgAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/gAB/gABhgADBgADBgADBgADBgADBgADjgAB/gAA9gAABgAABgAABgAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABnAAB/AABwAABgAABgAABgAABgAABgAABgAABgAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA+AAB/AADBAADAAADwAAB+AAAPAAADAACDAAD+AAB8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAABgAABgAAD+AAD+AABgAABgAABgAABgAABgAABgAABgAAB+AAA+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgwABgwABgwABgwABgwABgwABgwABgwABxwAA/wAAewAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAwABhgABhgABhgAAzAAAzAAAzAAAeAAAeAAAMAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADDDADDDABjmABnmABkmABkmAAs0AA4UAA4cAA4cAAYIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADhwABhgAAzAAAeAAAeAAAMAAAeAAAeAAAzAABhgADhwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAwABhgABhgABhgAAzAAAzAAASAAAeAAAeAAAMAAAMAAAIAAAYAAAYAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/gAD/gAADgAAHAAAOAAAcAAA4AABwAADgAAD/gAD/gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAGAAAMAAAMAAAMAAAMAAAMAAAMAAAYAADgAAAYAAAYAAAMAAAMAAAMAAAMAAAMAAAMAAAGAAADgAAAAAAAAAAAAAAAAAAYAAAYAAAYAAAYAAAYAAAYAAAYAAAYAAAYAAAYAAAYAAAYAAAYAAAYAAAYAAAYAAAYAAAYAAAYAAAYAAAAAAAAAAAAAAAAAAA4AAAMAAAGAAAGAAAGAAAGAAAGAAAGAAADAAAA4AADAAADAAAGAAAGAAAGAAAGAAAGAAAGAAAMAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAeDAA/DABznABh+ABgcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"));
            BitFont.RegisterBitFont("VerdanaCustomCharset24", new BitFontDescriptor(CustomCharset, VerdanaCustomCharset24, 24));
        }

        public static int FPS = 0;

        public static int LastS = -1;
        public static int Ticken = 0;

        public static bool disable = false;

        public static void Update()
        {
            if (LastS == -1)
            {
                LastS = DateTime.UtcNow.Second;
            }
            if (DateTime.UtcNow.Second - LastS != 0)
            {
                if (DateTime.UtcNow.Second > LastS)
                {
                    FPS = Ticken / (DateTime.UtcNow.Second - LastS);
                }
                LastS = DateTime.UtcNow.Second;
                Ticken = 0;
            }
            Ticken++;
        }

        protected override void Run()
        {
            Rendering.render();
            TaskScheduler.Exec();
            //Player_base.Player();
            //_3DRendering.Simple3DRendering.DrawCube();

            TaskManager.Main();

            //ImprovedVBE.DrawFilledRectangle(ImprovedVBE.cover, ImprovedVBE.colourToNumber(255, 255, 255), (int)MouseManager.X, (int)MouseManager.Y, 10, 10, false);

            ImprovedVBE.DrawImageAlpha3(C, (int)MouseManager.X, (int)MouseManager.Y);

            ImprovedVBE.display(vbe);
            vbe.Display();
            Heap.Collect();
        }
    }
}
